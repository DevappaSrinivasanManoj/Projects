<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ultra Modern Text Search</title>
  <style>
    :root {
      --primary: #1e1e2f;
      --accent: #00e6d0;
      --bg: #232336;
      --text: #f4f4f9;
      --card: #29294a;
      --border: #35355e;
      --radius: 18px;
      --shadow: 0 4px 24px rgba(0,0,0,0.18);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }
    header {
      width: 100%;
      padding: 2rem 1rem 1rem 1rem;
      text-align: center;
      background: var(--primary);
      box-shadow: var(--shadow);
      border-radius: 0 0 var(--radius) var(--radius);
    }
    h1 {
      margin: 0;
      font-size: 2.2rem;
      letter-spacing: 1px;
      color: var(--accent);
    }
    .container {
      width: 100%;
      max-width: 600px;
      margin: 2rem auto 0 auto;
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 2rem 1.5rem;
    }
    .input-row {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    .input-row label {
      font-size: 1rem;
      color: var(--accent);
      margin-bottom: 0.3rem;
    }
    .input-row input[type="text"] {
      padding: 0.7rem 1rem;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background: var(--bg);
      color: var(--text);
      font-size: 1.1rem;
      outline: none;
      transition: border 0.2s;
    }
    .input-row input[type="text"]:focus {
      border: 1.5px solid var(--accent);
    }
    .input-row button, .input-row input[type="file"]::-webkit-file-upload-button {
      background: var(--accent);
      color: var(--primary);
      border: none;
      border-radius: var(--radius);
      padding: 0.7rem 1.5rem;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,230,208,0.08);
      transition: background 0.2s, color 0.2s;
    }
    .input-row button:hover {
      background: #00bfae;
      color: #fff;
    }
    .results {
      margin-top: 2rem;
    }
    .result-card {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      margin-bottom: 1.2rem;
      padding: 1rem 1.2rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      transition: border 0.2s;
    }
    .result-card:hover {
      border: 1.5px solid var(--accent);
    }
    .filename {
      font-size: 1.05rem;
      color: var(--accent);
      margin-bottom: 0.5rem;
      font-weight: 600;
      word-break: break-all;
    }
    .match-line {
      font-size: 1rem;
      color: var(--text);
      margin-bottom: 0.2rem;
      word-break: break-word;
    }
    .highlight {
      background: var(--accent);
      color: var(--primary);
      border-radius: 6px;
      padding: 0 3px;
      font-weight: bold;
    }
    @media (max-width: 700px) {
      .container {
        max-width: 98vw;
        padding: 1.2rem 0.5rem;
      }
      header {
        padding: 1.2rem 0.5rem 0.7rem 0.5rem;
      }
    }
    @media (max-width: 480px) {
      h1 {
        font-size: 1.3rem;
      }
      .container {
        padding: 0.7rem 0.2rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Ultra Modern Text Search</h1>
    <p style="color:var(--text);opacity:0.7;font-size:1rem;margin-top:0.5rem;">Search for text in multiple files & folders. No files are edited. Works on PC & Mobile.</p>
  </header>
  <div class="container">
    <form id="searchForm" autocomplete="off">
      <div class="input-row">
        <label for="folderInput">Select Folder or Files</label>
        <input type="file" id="folderInput" webkitdirectory directory multiple accept=".txt,.json,.csv,.log,.md,.xml,.html,.js,.ts,.css,.py,.java,.c,.cpp,.cs,.yml,.yaml,.ini,.conf,.bat,.sh,.php,.rb,.go,.rs,.swift,.kt,.dart,.pl,.r,.sql,.ps1,.tex,.toml,.cfg,.env,.properties,.jsx,.tsx,.scss,.less,.sass,.jsp,.asp,.aspx,.vb,.f90,.f95,.f03,.f08,.f77,.f,.m,.mat,.jl,.lua,.groovy,.scala,.erl,.ex,.exs,.clj,.cljs,.edn,.lisp,.scm,.rkt,.ss,.el,.coffee,.h,.hpp,.hxx,.hh,.mli,.ml,.mll,.mly,.v,.sv,.svh,.vhd,.vhdl,.adb,.ads,.d,.nim,.vala,.cr,.e,.fs,.fsi,.fsx,.fsscript,.hx,.hxsl,.idr,.lidr,.ipynb,.nb,.sage,.tcl,.tk,.wish,.zsh,.fish,.csh,.tcsh,.ksh,.sh,.bash,.bat,.cmd,.ps1,.psm1,.psd1,.reg,.inf,.ini,.cfg,.conf,.cnf,.rc,.profile,.bashrc,.zshrc,.cshrc,.tcshrc,.kshrc,.login,.logout,.xinitrc,.xsession,.xprofile,.xresources,.xdefaults,.xmodmap,.xinputrc,.xserverrc,.xscreensaverrc,.xsession-errors,.xsession-errors.old,.Xauthority,.ICEauthority,.dmrc,.gtkrc,.gtkrc-2.0,.gtkrc.mine,.gtkrc-1.2-gnome2,.gtkrc-2.0-kde4,.gtkrc-2.0-kde3,.gtkrc-2.0-kde2,.gtkrc-2.0-kde1,.gtkrc-2.0-kde,.gtkrc-2.0-qt4,.gtkrc-2.0-qt3,.gtkrc-2.0-qt2,.gtkrc-2.0-qt1,.gtkrc-2.0-qt,.gtkrc-2.0-qtcurve,.gtkrc-2.0-qtcurve-gtk2,.gtkrc-2.0-qtcurve-gtk3,.gtkrc-2.0-qtcurve-gtk4,.gtkrc-2.0-qtcurve-gtk5,.gtkrc-2.0-qtcurve-gtk6,.gtkrc-2.0-qtcurve-gtk7,.gtkrc-2.0-qtcurve-gtk8,.gtkrc-2.0-qtcurve-gtk9,.gtkrc-2.0-qtcurve-gtk10,.gtkrc-2.0-qtcurve-gtk11,.gtkrc-2.0-qtcurve-gtk12,.gtkrc-2.0-qtcurve-gtk13,.gtkrc-2.0-qtcurve-gtk14,.gtkrc-2.0-qtcurve-gtk15,.gtkrc-2.0-qtcurve-gtk16,.gtkrc-2.0-qtcurve-gtk17,.gtkrc-2.0-qtcurve-gtk18,.gtkrc-2.0-qtcurve-gtk19,.gtkrc-2.0-qtcurve-gtk20,.gtkrc-2.0-qtcurve-gtk21,.gtkrc-2.0-qtcurve-gtk22,.gtkrc-2.0-qtcurve-gtk23,.gtkrc-2.0-qtcurve-gtk24,.gtkrc-2.0-qtcurve-gtk25,.gtkrc-2.0-qtcurve-gtk26,.gtkrc-2.0-qtcurve-gtk27,.gtkrc-2.0-qtcurve-gtk28,.gtkrc-2.0-qtcurve-gtk29,.gtkrc-2.0-qtcurve-gtk30,.gtkrc-2.0-qtcurve-gtk31,.gtkrc-2.0-qtcurve-gtk32,.gtkrc-2.0-qtcurve-gtk33,.gtkrc-2.0-qtcurve-gtk34,.gtkrc-2.0-qtcurve-gtk35,.gtkrc-2.0-qtcurve-gtk36,.gtkrc-2.0-qtcurve-gtk37,.gtkrc-2.0-qtcurve-gtk38,.gtkrc-2.0-qtcurve-gtk39,.gtkrc-2.0-qtcurve-gtk40,.gtkrc-2.0-qtcurve-gtk41,.gtkrc-2.0-qtcurve-gtk42,.gtkrc-2.0-qtcurve-gtk43,.gtkrc-2.0-qtcurve-gtk44,.gtkrc-2.0-qtcurve-gtk45,.gtkrc-2.0-qtcurve-gtk46,.gtkrc-2.0-qtcurve-gtk47,.gtkrc-2.0-qtcurve-gtk48,.gtkrc-2.0-qtcurve-gtk49,.gtkrc-2.0-qtcurve-gtk50,.gtkrc-2.0-qtcurve-gtk51,.gtkrc-2.0-qtcurve-gtk52,.gtkrc-2.0-qtcurve-gtk53,.gtkrc-2.0-qtcurve-gtk54,.gtkrc-2.0-qtcurve-gtk55,.gtkrc-2.0-qtcurve-gtk56,.gtkrc-2.0-qtcurve-gtk57,.gtkrc-2.0-qtcurve-gtk58,.gtkrc-2.0-qtcurve-gtk59,.gtkrc-2.0-qtcurve-gtk60,.gtkrc-2.0-qtcurve-gtk61,.gtkrc-2.0-qtcurve-gtk62,.gtkrc-2.0-qtcurve-gtk63,.gtkrc-2.0-qtcurve-gtk64,.gtkrc-2.0-qtcurve-gtk65,.gtkrc-2.0-qtcurve-gtk66,.gtkrc-2.0-qtcurve-gtk67,.gtkrc-2.0-qtcurve-gtk68,.gtkrc-2.0-qtcurve-gtk69,.gtkrc-2.0-qtcurve-gtk70,.gtkrc-2.0-qtcurve-gtk71,.gtkrc-2.0-qtcurve-gtk72,.gtkrc-2.0-qtcurve-gtk73,.gtkrc-2.0-qtcurve-gtk74,.gtkrc-2.0-qtcurve-gtk75,.gtkrc-2.0-qtcurve-gtk76,.gtkrc-2.0-qtcurve-gtk77,.gtkrc-2.0-qtcurve-gtk78,.gtkrc-2.0-qtcurve-gtk79,.gtkrc-2.0-qtcurve-gtk80,.gtkrc-2.0-qtcurve-gtk81,.gtkrc-2.0-qtcurve-gtk82,.gtkrc-2.0-qtcurve-gtk83,.gtkrc-2.0-qtcurve-gtk84,.gtkrc-2.0-qtcurve-gtk85,.gtkrc-2.0-qtcurve-gtk86,.gtkrc-2.0-qtcurve-gtk87,.gtkrc-2.0-qtcurve-gtk88,.gtkrc-2.0-qtcurve-gtk89,.gtkrc-2.0-qtcurve-gtk90,.gtkrc-2.0-qtcurve-gtk91,.gtkrc-2.0-qtcurve-gtk92,.gtkrc-2.0-qtcurve-gtk93,.gtkrc-2.0-qtcurve-gtk94,.gtkrc-2.0-qtcurve-gtk95,.gtkrc-2.0-qtcurve-gtk96,.gtkrc-2.0-qtcurve-gtk97,.gtkrc-2.0-qtcurve-gtk98,.gtkrc-2.0-qtcurve-gtk99,.gtkrc-2.0-qtcurve-gtk100,.gtkrc-2.0-qtcurve-gtk101,.gtkrc-2.0-qtcurve-gtk102,.gtkrc-2.0-qtcurve-gtk103,.gtkrc-2.0-qtcurve-gtk104,.gtkrc-2.0-qtcurve-gtk105,.gtkrc-2.0-qtcurve-gtk106,.gtkrc-2.0-qtcurve-gtk107,.gtkrc-2.0-qtcurve-gtk108,.gtkrc-2.0-qtcurve-gtk109,.gtkrc-2.0-qtcurve-gtk110,.gtkrc-2.0-qtcurve-gtk111,.gtkrc-2.0-qtcurve-gtk112,.gtkrc-2.0-qtcurve-gtk113,.gtkrc-2.0-qtcurve-gtk114,.gtkrc-2.0-qtcurve-gtk115,.gtkrc-2.0-qtcurve-gtk116,.gtkrc-2.0-qtcurve-gtk117,.gtkrc-2.0-qtcurve-gtk118,.gtkrc-2.0-qtcurve-gtk119,.gtkrc-2.0-qtcurve-gtk120,.gtkrc-2.0-qtcurve-gtk121,.gtkrc-2.0-qtcurve-gtk122,.gtkrc-2.0-qtcurve-gtk123,.gtkrc-2.0-qtcurve-gtk124,.gtkrc-2.0-qtcurve-gtk125,.gtkrc-2.0-qtcurve-gtk126,.gtkrc-2.0-qtcurve-gtk127,.gtkrc-2.0-qtcurve-gtk128,.gtkrc-2.0-qtcurve-gtk129,.gtkrc-2.0-qtcurve-gtk130,.gtkrc-2.0-qtcurve-gtk131,.gtkrc-2.0-qtcurve-gtk132,.gtkrc-2.0-qtcurve-gtk133,.gtkrc-2.0-qtcurve-gtk134,.gtkrc-2.0-qtcurve-gtk135,.gtkrc-2.0-qtcurve-gtk136,.gtkrc-2.0-qtcurve-gtk137,.gtkrc-2.0-qtcurve-gtk138,.gtkrc-2.0-qtcurve-gtk139,.gtkrc-2.0-qtcurve-gtk140,.gtkrc-2.0-qtcurve-gtk141,.gtkrc-2.0-qtcurve-gtk142,.gtkrc-2.0-qtcurve-gtk143,.gtkrc-2.0-qtcurve-gtk144,.gtkrc-2.0-qtcurve-gtk145,.gtkrc-2.0-qtcurve-gtk146,.gtkrc-2.0-qtcurve-gtk147,.gtkrc-2.0-qtcurve-gtk148,.gtkrc-2.0-qtcurve-gtk149,.gtkrc-2.0-qtcurve-gtk150,.gtkrc-2.0-qtcurve-gtk151,.gtkrc-2.0-qtcurve-gtk152,.gtkrc-2.0-qtcurve-gtk153,.gtkrc-2.0-qtcurve-gtk154,.gtkrc-2.0-qtcurve-gtk155,.gtkrc-2.0-qtcurve-gtk156,.gtkrc-2.0-qtcurve-gtk157,.gtkrc-2.0-qtcurve-gtk158,.gtkrc-2.0-qtcurve-gtk159,.gtkrc-2.0-qtcurve-gtk160,.gtkrc-2.0-qtcurve-gtk161,.gtkrc-2.0-qtcurve-gtk162,.gtkrc-2.0-qtcurve-gtk163,.gtkrc-2.0-qtcurve-gtk164,.gtkrc-2.0-qtcurve-gtk165,.gtkrc-2.0-qtcurve-gtk166,.gtkrc-2.0-qtcurve-gtk167,.gtkrc-2.0-qtcurve-gtk168,.gtkrc-2.0-qtcurve-gtk169,.gtkrc-2.0-qtcurve-gtk170,.gtkrc-2.0-qtcurve-gtk171,.gtkrc-2.0-qtcurve-gtk172,.gtkrc-2.0-qtcurve-gtk173,.gtkrc-2.0-qtcurve-gtk174,.gtkrc-2.0-qtcurve-gtk175,.gtkrc-2.0-qtcurve-gtk176,.gtkrc-2.0-qtcurve-gtk177,.gtkrc-2.0-qtcurve-gtk178,.gtkrc-2.0-qtcurve-gtk179,.gtkrc-2.0-qtcurve-gtk180,.gtkrc-2.0-qtcurve-gtk181,.gtkrc-2.0-qtcurve-gtk182,.gtkrc-2.0-qtcurve-gtk183,.gtkrc-2.0-qtcurve-gtk184,.gtkrc-2.0-qtcurve-gtk185,.gtkrc-2.0-qtcurve-gtk186,.gtkrc-2.0-qtcurve-gtk187,.gtkrc-2.0-qtcurve-gtk188,.gtkrc-2.0-qtcurve-gtk189,.gtkrc-2.0-qtcurve-gtk190,.gtkrc-2.0-qtcurve-gtk191,.gtkrc-2.0-qtcurve-gtk192,.gtkrc-2.0-qtcurve-gtk193,.gtkrc-2.0-qtcurve-gtk194,.gtkrc-2.0-qtcurve-gtk195,.gtkrc-2.0-qtcurve-gtk196,.gtkrc-2.0-qtcurve-gtk197,.gtkrc-2.0-qtcurve-gtk198,.gtkrc-2.0-qtcurve-gtk199,.gtkrc-2.0-qtcurve-gtk200" multiple />
      </div>
      <div class="input-row">
        <label for="searchInput">Search String</label>
        <input type="text" id="searchInput" placeholder="Enter text to search..." required />
      </div>
      <div class="input-row">
        <button type="submit">Search</button>
      </div>
    </form>
    <div class="results" id="results"></div>
  </div>
  <script>
    // Supported text file extensions
    const SUPPORTED_EXTS = [
      '.txt','.json','.csv','.log','.md','.xml','.html','.js','.ts','.css','.py','.java','.c','.cpp','.cs','.yml','.yaml','.ini','.conf','.bat','.sh','.php','.rb','.go','.rs','.swift','.kt','.dart','.pl','.r','.sql','.ps1','.tex','.toml','.cfg','.env','.properties','.jsx','.tsx','.scss','.less','.sass'
    ];

    const folderInput = document.getElementById('folderInput');
    const searchForm = document.getElementById('searchForm');
    const searchInput = document.getElementById('searchInput');
    const resultsDiv = document.getElementById('results');

    function isTextFile(filename) {
      const ext = filename.slice(filename.lastIndexOf('.')).toLowerCase();
      return SUPPORTED_EXTS.includes(ext);
    }

    function escapeHtml(text) {
      return text.replace(/[&<>"']/g, function(m) {
        return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'})[m];
      });
    }

    function highlightMatch(line, search) {
      const regex = new RegExp(`(${search.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');
      return line.replace(regex, '<span class="highlight">$1</span>');
    }

    function getSentences(text) {
      // Split by sentence-ending punctuation or newlines
      return text.split(/(?<=[.!?])\s+|\n/);
    }

    async function readFileContent(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = e => resolve(e.target.result);
        reader.onerror = e => reject(e);
        reader.readAsText(file);
      });
    }

    function flattenJson(obj, path = []) {
      let result = [];
      if (typeof obj === 'object' && obj !== null) {
        for (const key in obj) {
          if (Object.prototype.hasOwnProperty.call(obj, key)) {
            const newPath = path.concat([key]);
            if (typeof obj[key] === 'object' && obj[key] !== null) {
              result = result.concat(flattenJson(obj[key], newPath));
            } else {
              result.push({ path: newPath, value: obj[key] });
            }
          }
        }
      }
      return result;
    }

    searchForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      resultsDiv.innerHTML = '';
      const files = Array.from(folderInput.files || []);
      const searchStr = searchInput.value.trim();
      if (!searchStr) return;
      if (!files.length) {
        resultsDiv.innerHTML = '<div style="color:#ff6b6b;">Please select at least one file or folder.</div>';
        return;
      }
      let found = 0;
      for (const file of files) {
        if (!isTextFile(file.name)) continue;
        let content = '';
        try {
          content = await readFileContent(file);
        } catch {
          continue;
        }
        let matches = [];
        if (file.name.toLowerCase().endsWith('.json')) {
          // Special handling for JSON
          let jsonData;
          try {
            jsonData = JSON.parse(content);
          } catch {
            continue;
          }
          const flat = flattenJson(jsonData);
          for (let i = 0; i < flat.length; i++) {
            const kv = flat[i];
            if (
              (typeof kv.value === 'string' && kv.value.toLowerCase().includes(searchStr.toLowerCase())) ||
              (typeof kv.value !== 'string' && String(kv.value).toLowerCase().includes(searchStr.toLowerCase()))
            ) {
              // Get previous, current, next
              const context = [];
              if (i > 0) context.push(flat[i - 1]);
              context.push(kv);
              if (i < flat.length - 1) context.push(flat[i + 1]);
              matches.push(context);
            }
          }
          if (matches.length) {
            found++;
            const card = document.createElement('div');
            card.className = 'result-card';
            const fname = document.createElement('div');
            fname.className = 'filename';
            fname.textContent = file.webkitRelativePath || file.name;
            card.appendChild(fname);
            matches.forEach(contextArr => {
              contextArr.forEach((kv, idx) => {
                const lineDiv = document.createElement('div');
                lineDiv.className = 'match-line';
                let pathStr = kv.path.join('.');
                let valStr = String(kv.value);
                if (valStr.toLowerCase().includes(searchStr.toLowerCase())) {
                  valStr = highlightMatch(escapeHtml(valStr), searchStr);
                } else {
                  valStr = escapeHtml(valStr);
                }
                lineDiv.innerHTML = `<span style='color:#00e6d0;'>${escapeHtml(pathStr)}</span>: ${valStr}`;
                card.appendChild(lineDiv);
              });
              // Separator
              const sep = document.createElement('div');
              sep.style.margin = '0.5em 0';
              card.appendChild(sep);
            });
            resultsDiv.appendChild(card);
          }
          continue;
        }
        // Split into sentences
        const sentences = getSentences(content);
        for (let i = 0; i < sentences.length; i++) {
          if (sentences[i].toLowerCase().includes(searchStr.toLowerCase())) {
            matches.push({
              line: sentences[i],
              idx: i
            });
          }
        }
        if (matches.length) {
          found++;
          const card = document.createElement('div');
          card.className = 'result-card';
          const fname = document.createElement('div');
          fname.className = 'filename';
          fname.textContent = file.webkitRelativePath || file.name;
          card.appendChild(fname);
          matches.forEach(m => {
            const lineDiv = document.createElement('div');
            lineDiv.className = 'match-line';
            lineDiv.innerHTML = highlightMatch(escapeHtml(m.line), searchStr);
            card.appendChild(lineDiv);
          });
          resultsDiv.appendChild(card);
        }
      }
      if (!found) {
        resultsDiv.innerHTML = '<div style="color:#ffb86c;">No matches found.</div>';
      }
    });
  </script>
</body>
</html>
